<UserControl
  x:Class="SpeechAgent.Features.Settings.FindWin.Controls.WindowListControl"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:SpeechAgent.Features.Settings.FindWin.Controls"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  d:DesignHeight="450"
  d:DesignWidth="800"
  mc:Ignorable="d">
  <Border
    BorderBrush="Gray"
    BorderThickness="1"
    CornerRadius="5">
    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
      <ListBox
        Background="Transparent"
        BorderThickness="0"
        ItemsSource="{Binding Windows}"
        SelectedItem="{Binding SelectedWindow}">
        <ListBox.ItemsPanel>
          <ItemsPanelTemplate>
            <WrapPanel Orientation="Horizontal" />
          </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
          <DataTemplate>
            <Border
              Width="420"
              Margin="5"
              Background="White"
              BorderBrush="LightGray"
              BorderThickness="1"
              CornerRadius="5"
              Cursor="Hand">
              <Border.Style>
                <Style TargetType="Border">
                  <Style.Triggers>
                    <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
                      <Setter Property="Background" Value="LightBlue" />
                    </DataTrigger>
                    <Trigger Property="IsMouseOver" Value="True">
                      <Setter Property="Background" Value="LightYellow" />
                    </Trigger>
                  </Style.Triggers>
                </Style>
              </Border.Style>
              <StackPanel Margin="10">
                <!--  스크린샷  -->
                <Image
                  MaxHeight="238"
                  Margin="0,0,0,10"
                  RenderOptions.BitmapScalingMode="HighQuality"
                  Source="{Binding Screenshot}" />
                <!--  윈도우 정보  -->
                <TextBlock
                  Margin="0,0,0,5"
                  FontSize="12"
                  FontWeight="Bold"
                  Text="{Binding Title}"
                  TextWrapping="Wrap" />
                <TextBlock FontSize="10" Foreground="Gray">
                  <Run Text="Process: " />
                  <Run Text="{Binding ProcessName}" />
                </TextBlock>
                <TextBlock
                  FontSize="10"
                  Foreground="Gray"
                  Text="{Binding ClassName}"
                  TextWrapping="Wrap" />
              </StackPanel>
            </Border>
          </DataTemplate>
        </ListBox.ItemTemplate>
        <ListBox.ItemContainerStyle>
          <Style TargetType="ListBoxItem">
            <Setter Property="Template">
              <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                  <ContentPresenter />
                </ControlTemplate>
              </Setter.Value>
            </Setter>
          </Style>
        </ListBox.ItemContainerStyle>
      </ListBox>
    </ScrollViewer>
  </Border>
</UserControl>
